<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.4.0/purify.min.js"></script>
</head>

<body class="bg-blue-100" x-data="{'isModalOpen': false}" x-on:keydown.escape="isModalOpen=false" x-cloak>

<div x-data= "{'isModalTimesOpen': false}">
  <header class="invisible fixed md:visible top-0 min-w-full z-50">
    <nav id="desktop" class="bg-white py-5 px-8 shadow-md">
      <ul class="list-none flex justify-between gap-10">
        <div class="flex">
          <p class="text-xl text-bold">Arbeitszeiten Tracker</p>
          <button x-on:click="isModalTimesOpen = true">
            <svg class="w-10" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
          </button>
        </div>
        <div class="">
          <button x-on:click="isModalOpen = true">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-log-in"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line></svg>
          </button>
        </div>
      </ul>
    </nav>
  </header>

  <main class="relative container-lg mt-44">
    
    <div x-data="{ mitarbeiterShow: true }">
      <div id="step-1" class="flex flex-col items-center min-h-full h-screen justify-center mx-64 p-20 text-white gap-2" x-show="mitarbeiterShow">
        <div class="relative flex flex-col gap-5 bg-gradient-to-r from-blue-300 to-transparent py-20 px-10 rounded-b-2xl shadow-xl">      
          <p class="text-xl text-black">Bitte mit dem Mitarbeiter-Profil anmelden.</p>

          <div class="flex justify-center gap-5">
              <button class="text-xl px-6 py-4 bg-gray-800 text-white hover:bg-blue-400 hover:scale-110 hover:shadow-md ease-in-out transition rounded-full flex gap-2" x-on:click="mitarbeiterShow = ! mitarbeiterShow" value="Mitarbeiter_1" onclick="saveWorker(value)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-log-in"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line></svg>
                <span>Mitarbeiter 1</span>
              </button>

              <button class="text-xl px-6 py-4 bg-gray-800 text-white hover:bg-blue-400 hover:scale-110 hover:shadow-md ease-in-out transition rounded-full flex gap-2" x-on:click="mitarbeiterShow = ! mitarbeiterShow" value="Mitarbeiter_2" onclick="saveWorker(value)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-log-in"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line></svg>
                <span>Mitarbeiter 2</span>
              </button>

              <button class="text-xl px-6 py-4 bg-gray-800 text-white hover:bg-blue-400 hover:scale-110 hover:shadow-md ease-in-out transition rounded-full flex gap-2" x-on:click="mitarbeiterShow = ! mitarbeiterShow" value="Mitarbeiter_3" onclick="saveWorker(value)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-log-in"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line></svg>
                <span>Mitarbeiter 3</span>
              </button>            
            </div> 
          <div class="absolute -top-20 -left-0 w-100 bg-blue-400 p-5 rounded-t-2xl ">
            <div class="flex justify-center gap-3 text-white">
              <svg class="w-8 text-white fill-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
              <path d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/></svg>
              <h2 class="text-4xl text-bold">Mitarbeiter</h2>        
            </div>
          </div>   
        </div>
      </div>    
    </div>

    <div x-data="{ timerShow: true }">
      <div id="step-2" class="flex flex-col items-center min-h-full h-screen justify-center mx-64 p-20 text-white gap-2" x-show="timerShow">
        <div class="relative flex flex-col gap-5 bg-gradient-to-r from-blue-300 to-transparent py-20 px-32 rounded-b-2xl shadow-xl">

          <p class="text-xl text-black">Bitte den Timer korrekt bearbeiten.</p> 

          <div class="flex gap-5" role="banner"> 
            <form class="flex justify-center text-center flex-col project-form">
              <input class="py-4 px-6 rounded-xl text-black my-4" type="text" name="project" placeholder="Enter project name">

              <div class="flex flex-row gap-5">
                <button class="flex px-6 py-4 bg-gray-800 text-white hover:bg-green-500 hover:scale-90 border-b-4 shadow-inner border-black ease-in-out transition rounded-full flex items-center gap-2">
                  <input type="submit" class="" name="project" value="">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-play"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                    <span class="text-2xl btn start">Start</span>
                </button>

                <button class="flex px-6 py-4 bg-gray-800 text-white hover:bg-green-500 hover:scale-90 border-b-4 shadow-inner border-black ease-in-out transition rounded-full flex items-center gap-2">
                  <input type="submit" class="" name="project" value="">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-pause"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
                    <span class="text-2xl">Pause</span>
                </button>     

                <button class="flex px-6 py-4 bg-gray-800 text-white hover:bg-green-500 hover:scale-90 border-b-4 shadow-inner border-black ease-in-out transition rounded-full flex items-center gap-2" x-on:click="timerShow = ! timerShow">
                  <input type="submit" class="" name="project" value="">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    <span class="text-2xl" >Stop</span>
                </button>        
              </div>
            </form>  
          </div>
          <div class="absolute -top-20 -left-0 w-100 bg-blue-400 p-5 rounded-t-2xl ">
            <div class="flex justify-center gap-3 text-white">
              <svg class="w-8 text-white fill-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
              <path d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/></svg>
              <h2 class="text-4xl text-bold">Timer</h2>        
            </div>
          </div>   
        </div>     
      </div>
    </div>

    <div x-data="{ kundeShow: true }">
      <div id="step-3" class="flex flex-col items-center min-h-full h-screen justify-center mx-64 p-20 text-white gap-2" x-show="kundeShow">
        <div class="relative flex flex-col gap-5 bg-gradient-to-r from-blue-300 to-transparent py-20 px-32 rounded-b-2xl shadow-xl">      
          <p class="text-xl text-black">Bitte wählen welches Arbeitsgebiet gerade abgearbeitet wird.</p>

          <div class="flex justify-center gap-5">
              <button class="px-4 py-2 bg-gray-800 text-white hover:text-black hover:bg-blue-100 hover:scale-110 transition ease-in-out delay-50 rounded-full hover:scale-150 hover:shadow-md transition ease-in-out">
                <img class="w-20 brightness-200 hover:brightness-0" src="https://uploads-ssl.webflow.com/5e145781775c4939dc1c8a4d/5f3138b131574c69d861a796_hurrado_logo.png">
              </button>
              <button class="px-4 py-2 bg-gray-800 text-white hover:text-black hover:bg-blue-100 hover:scale-110 transition ease-in-out delay-50 rounded-full hover:scale-150 hover:shadow-md transition ease-in-out"> 
                <img class="w-20 brightness-200 hover:brightness-0" src="https://swyx-innovation.com/wp-content/uploads/2021/07/logo_positive_transparent_872.png">
              </button>
              <button class="px-4 py-2 bg-gray-800 text-white hover:text-black hover:bg-blue-100 hover:scale-110 transition ease-in-out delay-50 rounded-full hover:scale-150 hover:shadow-md transition ease-in-out">
                <img class="w-20 brightness-200 hover:brightness-0" src="https://res.cloudinary.com/crunchbase-production/image/upload/c_lpad,f_auto,q_auto:eco,dpr_1/x9uxkvfivvqpgbf1ro75">
              </button>            
            </div>

          <div class="absolute -top-20 -left-0 w-100 bg-blue-400 p-5 rounded-t-2xl ">
            <div class="flex justify-center gap-3 text-white">
              <svg class="w-8 text-white fill-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
              <path d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/></svg>
              <h2 class="text-4xl text-bold">Kunde</h2>        
            </div>
          </div>   
        </div>
      </div> 
    </div>

      <div class="fixed bottom-10 right-10">
        <svg class="stroke-blue-400 animate-pulse" xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg>
      </div>

      <div class="modal bg-white shadow-md w-1/3 py-10 px-16 rounded-2xl fixed top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 z-50 transform -translate-y-50 scale-110 transition-opacity transition-transform duration-100" role="dialog" tabindex="-1" x-show="isModalOpen" x-on:click.away="isModalOpen = false" x-cloak x-transition>
        <div class="model-inner relative">
          <svg class="w-10 absolute -bottom-8 -left-12 animate-pulse" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"/></svg>
          <div class="modal-header">
            <h2 class="text-2xl font-bold">            
            Backend-Login</h2>          
          </div>
          <div>
              <form class="">
                <div class="my-4">
                  <input class="shadow-md appearance-none border rounded-md w-full py-3 px-3 text-gray-700" id="username" type="text" placeholder="E-Mail">                
                </div>
                <div class="mb-6">
                  <input class="shadow-md appearance-none border rounded-md w-full py-3 px-3 text-gray-700" id="password" type="password" placeholder="Passwort">              
                </div>
                <div class="flex items-center justify-between">
                  <button class="bg-blue-200 text-black hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline" type="button">
                    Einloggen
                  </button>
                  <p class="inline-block align-baseline font-bold text-sm text-blue-500">
                    Passwort vergessen? <br>LastPass checken ;)
                  </p>
                </div>
              </form>
            </div>
          </div>
          <div class="absolute top-2 right-3">
            <button class="bg-blue-100 rounded-full p-3 shadow-md" aria-label="Close" x-on:click="isModalOpen=false"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
          </div>
        </div>    
        <div id="modal-bg" class="fixed top-0 left-0 min-h-full min-w-full bg-gray-900 opacity-50" x-show="isModalOpen" x-cloak></div>            
    </main> 

    <div class="modal bg-white shadow-md w-1/3 py-10 px-16 rounded-2xl fixed top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 z-50 transform -translate-y-50 scale-110 transition-opacity transition-transform duration-100 z-50 min-w-full" role="dialog" tabindex="-1" x-show="isModalTimesOpen" x-on:click.away="isModalTimesOpen = false" x-cloak x-transition>
      <aside class="relative container-lg mt-44">
        <div id="time-list" class="flex flex-col items-center min-h-full h-screen justify-center mx-64 p-20 text-white gap-2">
          <h1 class="text-black text-4xl font-bold">Arbeitszeiten</h1>
          <div class="relative flex flex-col gap-5 bg-white py-20 px-20 rounded-2xl shadow-xl">
            <!-- Main -->
            <main role="main">
                <ul class="projects">
                </ul>
            </main>
            <!-- End main-->        
          </div>
        </div>
        <div class="absolute top-2 right-3">
            <button class="bg-blue-100 rounded-full p-3 shadow-md" aria-label="Close" x-on:click="isModalTimesOpen=false"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
          </div>
      </aside>    
      <div id="modal-bg" class="fixed top-0 left-0 min-h-full min-w-full bg-blue-200 opacity-50 -z-50" x-show="isModalTimesOpen" x-cloak></div>  
    </div>   
  </div>

  <footer class="flex flex-row bg-gray-900 text-white justify-center py-2">
    <p style="text-align: center;">Gemacht mit <span style="color:red;"> ❤ </span>von Hylax</p>
  </footer>
 
</body>
</html>

<script>

  function saveWorker(name){
    dataController.addProject(name);
    UIController.addProjectToUI(name);
  }
  
// Data controller
const dataController = (function() {

    // Project class
    class Project {
        constructor(id, title) {
            this.id = id;
            this.title = title;
        }
    }

    // Project data
    const projects = {
        allProjects: []
    };

    // Publicly accessible
    return {

        // Add project
        addProject: function(title) {
          alert("Title in addProject: " + title);

            // Create ID
            let ID;
            if (projects.allProjects.length > 0) {
                ID = projects.allProjects[projects.allProjects.length - 1].id + 1;
            } else {
                ID = 0;
            }

            // Create a new instance
            const newProject = new Project(ID, title);

            // Add the project to the project data
            projects.allProjects.push(newProject);
            // Return the new project
            return newProject;


        },

        // Update project title in data structure
        updateTitle: function(newTitle, ID) {

            // Find the object with matching ID
            const projectToUpdate = projects.allProjects.find(project => project.id === ID);
            
            // Update the title
            projectToUpdate.title = newTitle;

        },

        // Delete a project from data structure
        deleteData: function(ID) {

            const currentProject = projects.allProjects.map(current => current.id);
            const index = currentProject.indexOf(ID);
            if (index !== -1) {
                projects.allProjects.splice(index, 1);
            }

        },

        // Testing
        testing: function() {
            console.log(projects);
        }

    };
    
})();

// UI controller
const UIController = (function() {

    // Variables
    let intervalID;

    // Get the element classes
    const DOMstrings = {
        projectForm: '.project-form',
        inputValue: 'input[type="text"]',
        projectList: '.projects',
        hoursSpan: '.hours',
        minutesSpan: '.minutes',
        secondsSpan: '.seconds'
    };

    // Create variables from DOMstrings
    const {projectForm, inputValue, projectList, hoursSpan, minutesSpan, secondsSpan} = DOMstrings;

    // Publicly accessible
    return {

        // Get input value
        getInput: function() {
            return document.querySelector(inputValue);
        },

        // Add project to UI
        addProjectToUI: function(name) {         
            // Create markup            
            const html = `
            <table class="text-black w-full" id="project-${name}">
              <tr class="font-bold">
                <td class="bg-blue-100 rounded-l-full py-2 px-4">Mitarbeiter</td>
                <td class="bg-blue-100 py-2 px-4">Kunde</td>
                <td class="bg-blue-100 py-2 px-4">Zeit</td>
                <td class="bg-blue-100 rounded-r-full py-2 px-4">Optionen</td>
              </tr>
              <tr>
                <td>${name}</td>
                <td>Fellbox</td>
                <td>
                  <div class="timer">                    
                    <p class="timer-text">
                      <span class="hours">00</span>:
                      <span class="minutes">00</span>:
                      <span class="seconds">00</span>                      
                    </p>
                    <button class="btn start">Start</button>
                  <button class="delete-btn"><i class="fa fa-times"></i></button>
                </div>
                </td>
                <td class="py-2 px-4 flex gap-5">
                  <svg class="btn start hover:stroke-blue-900 hover:scale-150 hover:animate-pulse ease-in-out transition" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                  <svg class="btn delete-btn hover:stroke-red-900 hover:scale-150 hover:animate-pulse ease-in-out transition" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                  <i class="fa fa-times"></i>
                </td>
              </tr>
            </table>`;

            // Insert the HTML into the DOM
            document.querySelector(projectList).insertAdjacentHTML('beforeend', html);

        },

        // Clear field
        clearField: function() {
            const input = document.querySelector(inputValue);
            input.value = '';
        },

        // Start the timer
        startTimer: function(event) {

            const target = event.target.previousElementSibling.lastElementChild;
            const seconds = target.querySelector(secondsSpan);
            const minutes = target.querySelector(minutesSpan);
            const hours = target.querySelector(hoursSpan); 

            let sec = 0;
            intervalID = setInterval(function() {
                sec++;
                seconds.textContent = (`0${sec % 60}`).substr(-2);
                minutes.textContent = (`0${(parseInt(sec / 60)) % 60}`).substr(-2);
                hours.textContent = (`0${parseInt(sec / 3600)}`).substr(-2);
            }, 1000);

            // Add interval ID to event target as an attribute
            target.setAttribute('timer-id', intervalID);

        },

        // Stop the timer
        stopTimer: function(event) {
            const target = event.target.previousElementSibling.lastElementChild;
            clearInterval(target.getAttribute('timer-id'));
        },

//Pause wird noch gebraucht

        // Update project name in UI
        edit: function(event) {
            
            const input = document.createElement('input');
            const title = event.target;
            const parent = title.parentNode;
            input.value = title.textContent;
            parent.insertBefore(input, title);
            parent.removeChild(title);

        },

        // Save the project title in UI
        save: function(event) {

            const title = document.createElement('h2');
            const input = event.target;
            const parent = input.parentNode;
            title.textContent = input.value;
            parent.insertBefore(title, input);
            parent.removeChild(input);
            return title.textContent;

        },

        // Delete the project in the UI
        delete: function(projectID) {
            const projectToDelete = document.getElementById(projectID);
            projectToDelete.parentNode.removeChild(projectToDelete);
        },

        // Make the DOMstrings public
        getDOMstrings: function() {
            return DOMstrings;
        }

    };
    
})();

// Global app controller
const controller = (function(dataCtrl, UICtrl) {

    // Event listeners
    const setupEventListeners = function() {

        // Get the DOMstrings
        const DOM = UICtrl.getDOMstrings();

        // When the form is submitted
        const form = document.querySelector(DOM.projectForm);
        form.addEventListener('submit', ctrlAddProject);

        const projects = document.querySelector(DOM.projectList);

        projects.addEventListener('click', function(event) {

            const target = event.target;

            // When the start button is clicked
            if (target.className === 'btn start' || target.className === 'btn start stop') {
                timer(event);
            }

            // When the project title is clicked
            if (target.tagName === 'H2') {
                editTitle(event);
            }

            // When the delete button is clicked
            if (target.className === 'delete-btn') {
                deleteProject(event);
            }

        });

        // When the enter key is pressed
        projects.addEventListener('keypress', function(event) {
            if (event.keyCode === 13 || event.which === 13) {
                saveTitle(event);
            }
        });

    };

    // Add new project
    const ctrlAddProject = function(event) {

        // Prevent default behavior
        event.preventDefault();

        // Get and sanitize the input
        const dirty = UICtrl.getInput().value;
        const clean = DOMPurify.sanitize(dirty);

        // If the input is not empty
        if (clean !== '') {
            
            // Add the project to the data controller
            const newProject = dataCtrl.addProject(clean);

            // Add the project to the UI
            UICtrl.addProjectToUI(newProject);

            // Clear the input field
            UICtrl.clearField();
        }

    };

    // Timer
    const timer = function(event) {

        const target = event.target;

        // Toggle the button color
        target.classList.toggle('stop');

        // If the button's text is start
        if (target.textContent === 'Start') {

            target.textContent = 'Stop';
            UICtrl.startTimer(event);
    
        // If the button's text is stop
        } else if (target.textContent === 'Stop') {

            target.textContent = 'Start';
            UICtrl.stopTimer(event);

        }

    };

    // Edit the project title
    const editTitle = function(event) {
        UICtrl.edit(event);
    };

    // Save the project title
    const saveTitle = function(event) {

        const ID = parseInt(event.target.parentNode.id.slice(8));

        // Update the project title in the UI
        const newTitle = UICtrl.save(event);

        // Update the project title in the data structure
        dataCtrl.updateTitle(newTitle, ID);

    };

    // Delete project
    const deleteProject = function(event) {
        const target = event.target;
        const projectID = target.parentNode.id;
        const ID = parseInt(target.parentNode.id.slice(8));

        if (projectID) {

            // Delete the project from the data structure
            dataCtrl.deleteData(ID);

            // Delete the item from the UI
            UICtrl.delete(projectID);
            
        }
    };

    // Publicly accessible
    return {
        
        // Initialization
        init: function() {
            console.log('Application has started');
            setupEventListeners();
        }

    };
    
})(dataController, UIController);

// Initialize
controller.init();

</script>
